#Variables
INCDIR=../include/
APP=desbox

#Usual compilation flags
CFLAGS=-std=c99 -Wall -Wextra -g -O2
CPPFLAGS=-I../include -DDEBUG
LDFLAGS=-lm

#Special rules and targets
.PHONY: all clean help genkey test #don't forget to remove test

#Rules and targets

all: $(APP)

$(APP): DES.o main.o
	$(CC) $(CFLAGS) -o $@ $^ $(LDFLAGS)

DES.o: DES.c
	$(CC) $(CFLAGS) $(CPPFLAGS) -c $<

main.o: main.c
	$(CC) $(CFLAGS) $(CPPFLAGS) -c $<

genkey: genkey.c
	$(CC) $(CFLAGS) -o $@ $^ $(LDFLAGS)

clean:
	@rm -f *.o $(APP) DES genkey

help :
	@echo -e "Usage :"
	@echo -e "  make [all]		build the software"
	@echo -e "  make DES		build DES"
	@echo -e "  make clean		remove all files generated by make"
	@echo -e "  make help		display this help"

# test only
test: DES.c
	$(CC) $(CFLAGS) $(CPPFLAGS) -o $@ $^
